<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>STAT - Processing</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body { font-family: monospace; }
    #status-log {
      white-space: pre-wrap;
      overflow-y: auto;
      max-height: 500px;
    }
  </style>
</head>
<body class="bg-gray-100">
  <div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold mb-4">Processing Your Audio...</h1>

    <div id="status-container" class="bg-white p-4 rounded shadow">
      <pre id="status-log" class="text-gray-800">Waiting for updates...</pre>
    </div>

    <div class="mt-4">
      <a href="/results" class="text-blue-600 hover:underline">Go to Results</a>
    </div>
  </div>

  <script>
    const logElement = document.getElementById("status-log");
    const eventSource = new EventSource("/stream");

    eventSource.onmessage = function(event) {
      if (logElement.innerText === "Waiting for updates...") {
        logElement.innerText = "";
      }
      logElement.innerText += event.data + "\n";
      logElement.scrollTop = logElement.scrollHeight; // Auto-scroll to bottom
    };
  </script>
</body>
</html>
